model SourceText {
  id           String      @id @default(cuid())
  title        String
  content      String
  chunkSize    Int         @default(300)
  chunkOverlap Int         @default(60)
  createdAt    DateTime    @default(now())
  chunks       TextChunk[]
  testPhrases  TestPhrase[]
}

model TextChunk {
  id           String   @id @default(cuid())
  sourceTextId String
  content      String
  chunkIndex   Int
  tokenCount   Int
  sourceText       SourceText       @relation(fields: [sourceTextId], references: [id], onDelete: Cascade)
  chunkEmbeddings  ChunkEmbedding[]
  expectedByPhrases TestPhrase[]    @relation("ExpectedChunk")
  @@index([sourceTextId])
}
